<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distribuidora Mario y Mar√≠a</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#1a1f36; color:#ecf0f1; min-height:100vh; }

  /* Banner */
  .banner { background:#34495e; color:white; text-align:center; padding:10px; font-weight:bold; font-size:0.95em; position:sticky; top:0; z-index:200; }

  /* Header */
  .header { background:#2c3e50; padding:20px 0; text-align:center; box-shadow:0 3px 15px rgba(0,0,0,0.3); position:sticky; top:35px; z-index:100; }
  .header h1 { font-size:2em; color:#ecf0f1; margin-bottom:5px; font-weight:700; }
  .header p { color:#bdc3c7; font-size:1em; margin-bottom:15px; }
  .nav-tabs { display:flex; justify-content:center; gap:15px; flex-wrap:wrap; }
  .tab-btn { background:#34495e; border:none; padding:10px 25px; border-radius:25px; cursor:pointer; font-size:0.95em; font-weight:600; color:#ecf0f1; transition:0.3s; }
  .tab-btn:hover { background:#3f5870; }
  .tab-btn.active { background:#3498db; color:white; }

  /* Container */
  .container { max-width:1200px; margin:0 auto; padding:30px 20px; }
  .tab-content { display:none; }
  .tab-content.active { display:block; }

  /* Info cards Inicio */
  .info-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:15px; }
  .info-card { background:#2c3e50; border-radius:12px; padding:20px; box-shadow:0 5px 15px rgba(0,0,0,0.4); transition:0.3s; }
  .info-card:hover { box-shadow:0 8px 25px rgba(0,0,0,0.6); }
  .info-card h3 { font-size:1.1em; margin-bottom:8px; color:#ecf0f1; }
  .info-card p { font-size:0.95em; color:#bdc3c7; }

  /* Contact info */
  .contact-info { background:#2c3e50; border-radius:12px; padding:25px; margin:40px 0; box-shadow:0 5px 15px rgba(0,0,0,0.4); }
  .contact-info h3 { text-align:center; margin-bottom:15px; font-weight:600; color:#ecf0f1; }
  .contact-details { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:15px; }
  .contact-item { display:flex; align-items:center; gap:10px; padding:10px; background:#34495e; border-radius:10px; font-size:0.95em; color:#ecf0f1; }

  /* Cat√°logo / Carrito */
  .cart-summary { background:#2c3e50; padding:15px 20px; border-radius:12px; margin-bottom:20px; display:flex; gap:10px; justify-content:space-between; align-items:center; flex-wrap:wrap; box-shadow:0 5px 15px rgba(0,0,0,0.4); }
  .cart-total { font-size:1.15em; font-weight:700; color:#e74c3c; }
  .clear-cart, .checkout-btn { border:none; padding:8px 18px; border-radius:20px; cursor:pointer; font-weight:600; transition:0.3s; }
  .clear-cart { background:#e74c3c; color:white; }
  .clear-cart:hover { background:#c0392b; }
  .checkout-btn { background:#3498db; color:white; }
  .checkout-btn:hover { background:#2980b9; }

  .products-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:15px; }
  .product-card { background:#2c3e50; border-radius:12px; padding:15px; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.4); transition:0.3s; }
  .product-card:hover { box-shadow:0 8px 25px rgba(0,0,0,0.6); }
  .product-image { width:130px; height:auto; max-height:130px; object-fit:contain; border-radius:6px; margin-bottom:12px; }
  .product-card button { background:#3498db; color:white; border:none; border-radius:8px; padding:8px 12px; font-weight:600; cursor:pointer; transition:0.3s; }
  .product-card button:hover { background:#2980b9; }
  .remove-btn { background:#e74c3c; color:white; border:none; border-radius:6px; padding:4px 8px; font-weight:600; cursor:pointer; transition:0.3s; }
  .remove-btn:hover { background:#c0392b; }

  /* Checkout */
  #checkout-summary { background:#2c3e50; padding:20px; border-radius:12px; margin-bottom:20px; box-shadow:0 5px 15px rgba(0,0,0,0.4); }

  /* Empresas */
  .empresas { background:#2c3e50; border-radius:12px; padding:15px; margin-top:40px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.4); }
  .empresas h3 { text-align:center; margin-bottom:15px; font-weight:600; color:#ecf0f1; }
  .logos { display:flex; gap:40px; animation:scroll 20s linear infinite; width:max-content; }
  .logos img { height:60px; object-fit:contain; }

  @keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-50%); } }

  /* WhatsApp flotante */
  .whatsapp-float { position:fixed; width:50px; height:50px; bottom:20px; right:20px; background:#25d366; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:2px 2px 10px rgba(0,0,0,0.4); }
  .whatsapp-float img { width:30px; }

  /* Formulario corporativo */
  #checkout-form { background:#2c3e50; padding:25px; border-radius:15px; box-shadow:0 5px 25px rgba(0,0,0,0.5); max-width:600px; margin:auto; }
  #checkout-form input, #checkout-form textarea { width:100%; padding:12px 15px; margin-bottom:15px; border:1px solid #555; border-radius:8px; font-size:1em; color:#ecf0f1; background:#34495e; transition:all 0.3s ease; }
  #checkout-form input:focus, #checkout-form textarea:focus { border-color:#3498db; outline:none; box-shadow:0 0 5px rgba(52,152,219,0.5); }
  #checkout-form button { background:#3498db; color:white; border:none; padding:12px 20px; font-size:1em; border-radius:10px; cursor:pointer; font-weight:bold; transition:all 0.3s ease; width:100%; }
  #checkout-form button:hover { background:#2980b9; }
  #checkout-form p { font-size:0.95em; color:#bdc3c7; margin-bottom:15px; text-align:center; }
</style>
</head>
<body>
<div class="banner">Env√≠os gratis RM para pedidos superiores a $30.000</div>

<div class="header">
  <h1>Distribuidora Mario y Mar√≠a</h1>
  <p>Condimentos premium para tu cocina</p>
  <div class="nav-tabs">
    <button class="tab-btn active" data-tab="inicio">Inicio</button>
    <button class="tab-btn" data-tab="catalogo">Cat√°logo</button>
    <button class="tab-btn" data-tab="checkout">Checkout</button>
  </div>
</div>

<div class="container">
  <!-- INICIO -->
  <div id="inicio" class="tab-content active">
    <div class="info-grid">
      <div class="info-card"><h3>Nuestra Misi√≥n</h3><p>Proporcionar condimentos de la m√°s alta calidad para chefs y amantes de la cocina.</p></div>
      <div class="info-card"><h3>Servicios</h3><p>Distribuci√≥n r√°pida y atenci√≥n personalizada para tu negocio o hogar.</p></div>
      <div class="info-card"><h3>Horarios</h3><p>Lun-Vie: 8-18<br>S√°b: 8-14<br>Dom: Cerrado</p></div>
    </div>

    <div class="contact-info">
      <h3>Contacto</h3>
      <div class="contact-details">
        <div class="contact-item">+56 9 7725 3231</div>
        <div class="contact-item">üìß juanpablo.pinar14@gmail.com</div>
        <div class="contact-item">üìç H√©roes del Buin 0294, Recoleta</div>
      </div>
    </div>

    <div class="empresas">
      <h3>Empresas con las que trabajamos</h3>
      <div class="logos">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Agrosuper_logo.png">
        <img src="https://seeklogo.com/images/S/saida-logo-0F2D55E622-seeklogo.com.png">
        <img src="https://seeklogo.com/images/S/sopraval-logo-8F0ED61874-seeklogo.com.png">
      </div>
    </div>
  </div>

  <!-- CAT√ÅLOGO -->
  <div id="catalogo" class="tab-content">
    <div class="cart-summary">
      <div><span id="cart-count">0</span> productos</div>
      <div class="cart-total">Total: $<span id="cart-total">0</span></div>
      <button class="clear-cart" onclick="clearCart()">Vaciar Carrito</button>
      <button class="checkout-btn" onclick="switchTab('checkout')">Finalizar Compra</button>
    </div>

    <div class="cart-items" id="cart-items" style="display:none;">
      <h3>Productos en tu carrito:</h3>
      <div id="cart-list"></div>
    </div>

    <div class="products-grid" id="products-grid"></div>
  </div>

  <!-- CHECKOUT -->
  <div id="checkout" class="tab-content">
    <h2>üìù Cotizaci√≥n</h2>
    <div id="checkout-summary"></div>

    <h3>üì© Formulario de contacto</h3>
    <form id="checkout-form">
      <p>Con esto nos llegar√° el pedido y te contactaremos de todas formas para darte seguimiento.</p>
      <input type="text" name="name" placeholder="Nombre" required>
      <input type="email" name="email" placeholder="Correo electr√≥nico" required>
      <input type="tel" name="phone" placeholder="Tel√©fono">
      <textarea name="message" placeholder="Comentarios adicionales" rows="4"></textarea>
      <p>Nos tardamos m√°ximo 48 horas h√°biles en entregar el pedido.</p>
      <button type="submit">Enviar cotizaci√≥n</button>
    </form>
  </div>
</div>

<a href="https://wa.me/56977253231?text=¬°Hola! Me interesa conocer m√°s sobre sus productos." class="whatsapp-float" target="_blank">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg">
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
<script>
  emailjs.init("r2pWUoFAXXQ72yhLA");

  const products=[
    {id:1,name:"Piment√≥n Dulce",description:"Piment√≥n espa√±ol de calidad",price:2500,image:"https://santaisabel.vtexassets.com/arquivos/ids/176016-900-900?width=900&height=900&aspect=true"},
    {id:2,name:"Or√©gano Premium",description:"Or√©gano seco seleccionado",price:1800,image:"https://upload.wikimedia.org/wikipedia/commons/5/55/Oregano.jpg"},
    {id:3,name:"Comino Molido",description:"Comino fresco molido",price:2200,image:"https://upload.wikimedia.org/wikipedia/commons/2/26/Cumin.jpg"}
  ];
  let cart=[];

  function renderProducts(){
    document.getElementById('products-grid').innerHTML=products.map(p=>`
      <div class="product-card">
        <img src="${p.image}" class="product-image">
        <div><b>${p.name}</b></div>
        <div>${p.description}</div>
        <div><b>$${p.price.toLocaleString()}</b></div>
        <div><button onclick="addToCart(${p.id})">Agregar</button></div>
      </div>`).join('');
  }

  function addToCart(id){
    const p=products.find(x=>x.id===id);
    const e=cart.find(i=>i.id===id);
    if(e) e.quantity++; else cart.push({...p,quantity:1});
    updateCart();
  }

  function updateCart(){
    const count=cart.reduce((s,i)=>s+i.quantity,0),
          total=cart.reduce((s,i)=>s+i.price*i.quantity,0);
    document.getElementById('cart-count').textContent=count;
    document.getElementById('cart-total').textContent=total.toLocaleString();
    const items=document.getElementById('cart-items'),
          list=document.getElementById('cart-list');
    if(cart.length>0){
      items.style.display='block';
      list.innerHTML=cart.map((i,idx)=>`${i.name} x${i.quantity} - $${(i.price*i.quantity).toLocaleString()} <button class="remove-btn" onclick="removeItem(${idx})">Eliminar</button>`).join('<br>');
    } else items.style.display='none';
    updateCheckout();
  }

  function removeItem(i){ cart.splice(i,1); updateCart(); }
  function clearCart(){ cart=[]; updateCart(); }

  function updateCheckout(){
    const summaryEl=document.getElementById('checkout-summary');
    if(!summaryEl) return;
    const summary=cart.map(i=>`${i.name} x${i.quantity} - $${(i.price*i.quantity).toLocaleString()}`).join('<br>');
    const total=cart.reduce((s,i)=>s+i.price*i.quantity,0);
    summaryEl.innerHTML = cart.length>0 ? `<p>${summary}</p><h3>Total: $${total.toLocaleString()}</h3>` : "<p>No hay productos en el carrito.</p>";
  }

  function switchTab(tabId){
    document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active');
    updateCheckout();
  }

  document.querySelectorAll('.tab-btn').forEach(btn=>{
    btn.addEventListener('click', e=>switchTab(btn.dataset.tab));
  });

  document.addEventListener("DOMContentLoaded", renderProducts);

  // Formulario EmailJS
  document.getElementById('checkout-form').addEventListener('submit', function(event){
    event.preventDefault();
    const templateParams={
      name:this.name.value,
      email:this.email.value,
      phone:this.phone.value,
      message:this.message.value,
      cart:cart.map(i=>`${i.name} x${i.quantity} - $${(i.price*i.quantity).toLocaleString()}`).join(", "),
      total:cart.reduce((s,i)=>s+i.price*i.quantity,0)
    };
    emailjs.send('service_jhffvp5','template_olcm89v',templateParams)
      .then(()=>{ alert('Cotizaci√≥n enviada correctamente.'); this.reset(); cart=[]; updateCart(); switchTab('inicio'); })
      .catch(err=>{ alert('Error al enviar: '+err); });
  });
</script>
</body>
</html>

